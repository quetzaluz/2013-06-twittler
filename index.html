<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
	<script src="jquery.timeago.js"></script>
    <script src="data_generator.js"></script>
	<link rel="stylesheet" type="text/css" href="index.css">
  </head>
  <body>
  <div id="tweetBox"></div>
    <script>
      $(document).ready(function(){
	    $("abbr.timeago").timeago(); //attaching time func
        var $body = $('body');
        var $tweetBox = $('#tweetBox');
        var intervalID = setInterval(function () {
		//trying to refresh tweets with setInterval
		$tweetBox.html(''); 
        var index = streams.home.length - 1;
		var limit = streams.home.length - 20;
        while(index >= limit){
		  $tweetBox.css('height', $(window).height() - 32 + 'px');
          var tweet = streams.home[index];
		  var $tweet = $('<div class = tweet1></div>') // from original
          var $tweetText = $('<div class = "tweetText"></div>');
          var $tweetTime = $('<div class = "tweetTime"></div>');
		  var $tweetUser = $('<div class = "tweetUser"></div>');
		  $tweetUser.text('@' + tweet.user);
          $tweetText.text(': ' + tweet.message);
          $tweetTime.text(jQuery.timeago(tweet.created_at));
		  $tweetUser.appendTo($tweet);
          $tweetText.appendTo($tweet);
          $tweetTime.appendTo($tweet);
		  $tweet.appendTo($tweetBox);
          index -= 1;
		  }
		}, 200);
      });

    </script>
  </body>
</html>
